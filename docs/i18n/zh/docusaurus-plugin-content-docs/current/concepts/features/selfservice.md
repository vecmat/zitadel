---
title: 自助服务
---

ZITADEL允许用户自己执行许多任务。 对于这些任务，我们要么提供一个用户界面，要么可以通过ZITADEL的API启动或完成任务。

重要的是要理解，根据您的使用情况，将会有不同的用户类型来执行不同的操作：

- `用户` 是您应用程序的最终用户。 像任何CIAM解决方案一样，用户应该能够执行诸如注册/加入、更新其个人资料和管理身份验证器等任务。 某些操作可以预登录，其他操作则要求用户有一个有效的会话。
- `Managers` are users with a [special manager role](../../guides/manage/console/managers) within ZITADEL and can perform administrative actions such as system configuration or granting access rights to users.

所有自助接口都可用不同的 [语言](/docs/guides/manage/customize/texts#internationalization)。

:::info
ZITADEL涵盖典型的“CIAM”自助功能以及多租用场景授权的访问管理。 请参阅 [管理员](#managers) 部分。
:::

## 登记

:::info
您可以通过传递范围 `urn:zitadel:iam:org:domain:primary:{domainname}` 在授权请求中预先选择一个组织。 这将迫使用户只能在指定的组织注册。 此外，品牌和登录设置 (例如社交登录提供者) 直接显示给用户。
:::

### 本地账户

允许匿名用户和身份验证用户，他们尚未在给定的组织中创建帐户 (注册) 本身。

- 必填项
- 设置密码
- 接受服务条款和隐私政策
- 用户收到一封包含一次验证码的电子邮件。
- 用户必须输入一次性代码才能完成注册
- 用户可以重新请求一个新的一次性代码

第一次登录时提示用户设置 MFA。 如果在登录政策中强制执行小额供资和微型企业方案，这一步骤可以变成强制性的。

### 现有身份 / SSO / 社交登录

匿名用户和认证用户，他们尚未在指定的组织中，将向外部身份提供者注册。 外部身份提供者可以是社交登录提供者或预先配置的身份提供者。

- 外部身份提供者提供的信息用于预填个人资料信息
- 用户可以更新个人资料信息
- 在ZITADEL内创建一个帐户并与外部身份提供者关联

#### 帐户链接

当您使用外部身份提供者登录且用户在 ZITADEL中不存在时，将触发自动注册流。 用户有两个选项：

- 创建一个新账户：将创建一个新账户如上文所述。
- 自动识别：用户被提示使用现有的 [本地账户](#local-account) 登录。 如果成功，来自外部身份提供者的现有身份将与当地账户挂钩。 用户现在可以使用本地账户或任何链接的外部账户登录。

## 登录

:::info 自定义和品牌
登录页面可以通过自定义不同的品牌来更改，您可以定义登录的自定义域(eg, 登录。 cme.com)。

默认情况下，显示的品牌是根据用户的域定义的。 如果您想在默认情况下显示特定组织的品牌， 您需要通过一个主域范围 (`urn:zitadel:iam:org:domain:primary:{domainname}`) 与授权请求 或定义您项目设置中的行为。
:::

### Web、移动和单页应用程序

[本指南](/docs/guides/integrate/login-users) 更详细地解释了不同应用程序类型的登录流程。 人类用户被重定向到ZITADEL的登录页面，并使用交互登录流程完成登录。 重要的是要理解ZITADEL提供一个托管登录页面，而用户的设备在浏览器中打开这个登录页面。 甚至在Native/Mobile 应用中。

#### MFA / 2FA

当用户被自动提示提供第二个因数时，：

- 实例或组织 [登录策略](/docs/concepts/structure/policies#login-policy) 已设置
- 客户请求
- 为用户设置多因子

当需要一个多因素，但不需要设置，那么用户需要设置一个额外因素。

#### FIDO 密码

用户可以选择一个按钮来启动无密码登录或使用回退方法 (例如使用用户名/密码登录)。

无密码登录流遵循的 FIDO2 / WebAuthN 标准。 简要解释了以下事件：

- 用户选择按钮
- 用户设备将要求用户提供手势(如Facebook，Windows Hello，指纹，PIN)
- 用户被重定向到应用程序

通过设置密码，可以在用户设备的任何一个上提供手势。 这不是正在执行登录流量的设备(如在移动设备上)。 用户体验主要取决于使用的操作系统和浏览器。

### SSO / 社交登录

给定外部身份提供者是在实例或组织上配置的，然后：

- 用户将显示每个身份提供者的按钮作为使用 [本地账户](#local-account) 登录的替代选项
- 点击按钮时，用户将被重定向到身份提供商
- 登录成功后，用户将被重定向到应用程序

### 机

机器帐户不能使用交互登录，但需要其他验证手段，例如私人签名的 JWT 或个人访问令牌。 阅读更多关于 [服务用户](/docs/guides/integrate/serviceusers) 的信息，推荐 [OpenID Connect Flows](/docs/guides/integrate/oauth-recommended-flows#different-client-profiles)

### 其他客户端

我们目前不会暴露登录API。 您可以通过管理 API 注册用户，您不能使用我们的 API 登录用户。 在您不能使用网站的情况下(例如游戏、VR、...)，这可能很重要。

### 账户选择器

用于登录的帐户列表将显示给用户。 用户可以点击列表中的帐户，不需要输入用户名。 用户仍然可以使用不在列表中的其他用户登录。

:::info
此行为可以在授权请求时更改。 请参阅我们的 [指南](/docs/guides/integrate/login-users)。
:::

### 密码重置

未经验证的用户可以在登录流程中提供登录名后请求密码重置。

- 用户选择重置密码
- 一封电子邮件将被发送到已验证的电子邮件地址
- 用户打开链接，必须提供新密码

## 注销

用户可以终止所有用户的会话(登出)。 客户端也可以通过调用 [特定端点](/docs/apis/openidoauth/endpoints#end_session_endpoint) 来实现这一点。

## 个人信息

这些操作仅供认证用户使用。 ZITADEL为路径 _{your_domain}/ui/console/users/我_ 的用户配置文件外的用户配置提供了一个自助UI。 您也可以通过使用我们的 API 来实现您自己的版本。

### 更改密码

用户可以更改密码。 必须先输入当前密码。

### MFA / FIDO Passkeys

用户可以设置和删除第二个因子和 FIDO 密码(无密码)。 可用的身份验证器是：

- 移动一次性密码 (OTP) (身份验证器应用，SMS)
- FIDO Universal Second Factor (U2F) (security Keys, Device等)
- FIDO2 WebAuthN (Passkeys)

### 更新信息

用户可以更改其个人资料信息。 这包括:

- 用户名
- 姓氏和名字
- 昵称
- 显示名称
- 两性平等
- 语言
- 电子邮件地址
- 电话号码

### 电子邮件验证

用户可以更改他们的电子邮件地址。 用户收到一次性密码，可以验证对给定电子邮件地址的控制。

### 电话验证

用户可以更改电话号码。 用户收到一次性密码，可以验证对给定电话号码的控制。

### 身份提供商

用户可以在 [本地用户帐户](#local-account) 和 [外部身份](#existing-identity--sso--social-login) 之间创建连接。 用户可以使用任何链接的帐户登录。 [在登录过程中将外部账户](#account-linking) 连接完成。

## 管理人员

必须注意到， `管理器` 并不是一个简单的管理用户， 但可以用来创造更先进的情景，例如将整个组织的行政管理权委托给一个用户， 当时作为该用户组的管理员和权限管理员。

因此，我们将解释ZITADEL中两种非常常见的假设情况：

- `管理员与世隔绝`: 在一个单一的组织环境中授予行政权限。
- `委派中的管理员`: 给予来自不同组织的用户管理权限，组织彼此依赖关系

[管理员角色](../../guides/manage/console/managers#roles) 的列表是可用的，包含权限描述。 管理人员可以指派给人类用户和服务用户，以便按程序管理某些任务。

### 管理员与世隔绝状态

具有管理员角色 `IAM_OWNER` 或 `ORG_OWNER` 的用户可能想要从其组织中分配更高的权限来处理IAM任务的某些方面。 这可能是在这个孤立的组织中分配授权的权限(`ORG_USER_MANAGER`)或处理项目和应用程序的设置(`PROJECT_OWNER`)。

### 授权管理人员

在 [B2B 场景](/docs/guides/solution-scenarios/b2b)中描述的一个设置中，存在一个项目所有者组织和一个客户组织。 该项目授予客户组织，以便客户能够使用该项目并向其用户分配授权。

如果设置，所有者可能希望给予客户组织的一个管理用户角色 `ORG_OWNER`。 配备了这个管理员角色，用户可以执行类似配置自己的 SSO/身份提供商的动作， 设置他们组织的安全政策，定制品牌，或将项目或管理员角色分配给其他用户。

`ORG_OWNER` 也可以不仅将管理员角色委托给其他用户 [如前面一节所述](#managers-in-isolation) ，而且还可以管理她自己组织的所有方面，并授权用户使用授予的项目。 ZITADEL没有必要在各组织之间复制所有的设置和项目。 相反，你在一个组织中设置了这个项目，将它委托给不同的组织。 然后任命用户担任该组织的管理人员，以便在多租约情况下能够自我服务。
